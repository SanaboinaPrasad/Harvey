machine:
  xcode:
    version: 9.0
  environment:
    LANG: en_US.UTF-8
    HOMEBREW_NO_AUTO_UPDATE: 1

dependencies:
  override:
  - brew install swiftlint
  - npm install -g typescript
  - npm install -g ts-node
  - yarn
  - yarn add git+ssh://git@github.com/sunshinejr/danger-js.git\#file_line_api ts-node
  # - npm install -g danger
  # - brew install danger/tap/danger-swift
  - git clone https://github.com/sunshinejr/danger-swift.git
  - cd danger-swift && git checkout inline && make install  

test:
  override:
  # - swift build
  # - swift test
  # - pod lib lint
  - ts-node --ignore=false node_modules/danger/source/commands/danger-process.ts danger-swift
