machine:
  xcode:
    version: 9.0
  environment:
    LANG: en_US.UTF-8
    HOMEBREW_NO_AUTO_UPDATE: 1

dependencies:
  override:
  - brew install swiftlint
  - npm install git+https://github.com/sunshinejr/danger-js.git\#file_line_api
  # - npm install -g danger
  # - brew install danger/tap/danger-swift
  - git clone https://github.com/sunshinejr/danger-swift.git
  - cd danger-swift && git checkout inline && make install  

test:
  override:
  - swift build
  - swift test
  - pod lib lint
  - danger process danger-swift
